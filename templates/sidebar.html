{% load recent_comments most_commented nowhitespace %}
{% most_commented %}
{% if most_commented %}
	<h2>Most Commented</h2>
	<small class="subtitle">10 most commented on posts</small>
	<ul>
	{% for post in most_commented %}
		<li>
			<a href="{{ post.get_absolute_url }}">{{ post.title }}</a>
			<a href="{{ post.get_absolute_url }}#comments" class="commentcount">{{ post.comments }}</a>
		</li>
	{% endfor %}
	</ul>
	<script>{% nowhitespace %}
		ae.util.http.getJSONP('http://hits.alanedwardes.com/?callback=?', function(hits){
			var hitCount = document.getElementById('hit-count');
			ae.util.element('h2', 'Most Visited', hitCount);
			ae.util.element('small', {innerHTML: '10 most visited posts in the past month', className: 'subtitle'}, hitCount);
			var ul = ae.util.element('ul', {}, hitCount);
			for (var i = 0; i < hits.length; i++)
			{
				var hit = hits[i];
				var li = ae.util.element('li', {}, ul);
				ae.util.element('a', {
					href: hit.resource,
					innerHTML: hit.resource_title
				}, li);
				ae.util.element('a', {
					href: hit.resource,
					className: 'visitcount',
					innerHTML: hit.hits
				}, li);
			}
		});
	{% endnowhitespace %}</script>
	<div id="hit-count"></div>
{% endif %}